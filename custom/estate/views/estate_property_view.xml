<?xml version="1.0"?>
  <odoo>

    <!-- Para la vista de Listado o Tree-->
    <record id="estate_property_view_tree" model="ir.ui.view">
      <field name="name">estate.property.tree</field>
      <field name="model">estate.property</field>
      <field name="arch" type="xml">
        <tree string="Properties"> 
          <field name="name" string="Title"></field>
          <field name="property_type_id" string="Property Type"></field>
          <field name="property_tag_ids" widget="many2many_tags"/>
          <field name="postcode"></field>
          <field name="bedrooms"></field>
          <field name="living_area" string="Living Area (sqm)"></field>
          <field name="expected_price"></field>
          <field name="selling_price"></field>
          <field name="date_availability" string="Available From"></field>
          <field name="user_id"/>
          <field name="partner_id"/>
        </tree>
      </field>
    </record>


    <!-- Para la vista de formulario Form-->
    <record id="estate_property_view_form" model="ir.ui.view">
        <field name="name">estate.property.form</field>
        <field name="model">estate.property</field>
        <field name="arch" type="xml">
            <form string="Estate Property">
              <div class="oe_button_box" name="button_box">
                <button name="action_estate_property" type="object"
                            class="oe_stat_button" icon="fa-star">
                </button>
              </div>

                <sheet>
                <h2><field name="name"/></h2>
                    <group>
                        <group>
                            <field name="property_type_id" string="Property Type"/>
                            <field name="postcode"/>
                            <field name="date_availability" string="Available From"/>
                        </group>
                        <group>
                            <field name="property_tag_ids" widget="many2many_tags"/>
                            <field name="expected_price"/>
                            <field name="best_offer_price"/>
                            <field name="selling_price"/>
                        </group>
                        <notebook>
                            <page1 string="Description">
                            <group>
                                <field name="description"/>
                                <field name="bedrooms"/>
                                <field name="living_area" string="Living Area (sqm)"/>
                                <field name="facades"/>
                                <field name="garage"/>
                                <field name="garden"/>
                                <field name="garden_area" string="Garden Area (sqm)"/>
                                <field name="garden_orientation"/>
                                <field name="estate"/>
                                <field name="total_area"/>
                            </group>
                            </page1>
                            <page2 string="More Info">
                              <group>
                                <field name="user_id" readonly="True"/>
                                <field name="partner_id"/>
                              </group>
                            </page2>
                            <page3 string="Offer">
                              <group>
                                <field name="property_offer_ids"/>
                              </group>
                            </page3>
                        </notebook>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

  <!-- Para el filtrado y group by con Search-->
  <record id="estate_property_view_search" model="ir.ui.view">
            <field name="name">estate.property.search</field>
            <field name="model">estate.property</field>
            <field name="arch" type="xml">
                <search string="Estate property searcher">
                    <field name="date_availability" string="Available" />
                    <field name="postcode"/>
                    <separator/>
                    <filter string="Estate is New or Offer Received" name="estate" domain="['|', ('estate', '=', 'new'), ('estate', '=', 'offer received')]"/>
                    <group expand="1" string="Group By">
                        <filter string="Postcode" name="postcode" context="{'group_by':'postcode'}"/>
                        <filter string="Property Type" name="property_type_id" context="{'group_by':'property_type_id'}"/>
                        <filter string="User" name="user_id" context="{'group_by':'user_id'}"/>
                    </group>
                </search>
            </field>
  </record>


  <!-- Para que aparezca el boton en el menu-->
    <record id="estate_property_action" model="ir.actions.act_window"><!-- el id que pongamos aqui servirÃ¡ para llamarlo en el estate_menus-->
      <field name="name">Estate Property action</field>
      <field name="res_model">estate.property</field>
      <field name="view_mode">tree,form</field>
    </record>
  </odoo>
