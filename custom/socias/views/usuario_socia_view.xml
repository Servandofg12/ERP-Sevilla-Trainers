<?xml version="1.0"?>
  <odoo>

    <!-- Para la vista de Listado o Tree-->
    <record id="estate_property_view_tree" model="ir.ui.view">
      <field name="name">usuario.socia.tree</field>
      <field name="model">usuario.socia</field>
      <field name="arch" type="xml">
        <tree string="Propiedades">
          <field name="name" string="Nombre"></field>
          <field name="surnames" string="Apellidos"></field>
          <field name="birth_date" string="Fecha Nacimiento"/>
          <field name="peso_actual"></field>
          <field name="altura_actual"></field>
          <field name="tipo_pase_temporada" string="Tipo Pase"></field>
        </tree>
      </field>
    </record>

    <record id="usuario_socia_view_form" model="ir.ui.view">
        <field name="name">usuario.socia.form</field>
        <field name="model">usuario.socia</field>
        <field name="arch" type="xml">
            <form string="Socias">

              <header>
                <!-- Aquí van botones de dar de alta y baja-->
                <field name="dada_alta"/>
                <button name="action_dar_de_alta" type="object" string="Dar de alta" attrs="{'invisible':[('dada_alta', '==', True)]}"/>
                <button name="action_dar_de_baja" type="object" string="Dar de baja" attrs="{'invisible':[('dada_alta', '==', False)]}"/>
              </header>

                <sheet>
                    <group>
                        <group>
                            <field name="name" string="Nombre"/>
                            <field name="surnames" string="Apellidos"/>
                            <field name="fecha_de_alta" string="Dada de alta en" readonly="True"/>
                            <field name="fecha_de_baja" string="Dada de baja en" readonly="True"/>
                        </group>
                        <group>
                            <field name="edad" string="Edad"/>
                            <field name="coste_pase" string="Coste del Pase"/>
                            <field name="dia_de_pago" string="Próximo día de Pago"/>
                        </group>
                    </group>
                    <group>
                        <notebook>
                            <page1 string="Aspectos Físicos">
                              <group>
                                <field name="peso_actual"/>
                                <field name="altura_actual"/>
                              </group>
                            </page1>
                            <page2 string="Usuario">
                              <group>
                                <field name="user_id" string="Usuario a usar en la aplicación" widget="many2one" options="{'no_create': False}"/>
                              </group>
                            </page2 >
                            <page3 string="Datos personales y de contacto">
                              <group>
                                <group>
                                  <field name="tiene_dni" string="¿Tiene DNI?"/>
                                  <field name="dni" string="DNI" attrs="{'invisible':[('tiene_dni', '==', False)]}"/>
                                  <field name="nie" string="NIE" attrs="{'invisible':[('tiene_dni', '==', True)]}"/>
                                </group>
                                <group>
                                  <field name="correo" string="Correo electrónico"/>
                                  <field name="telefono" string="Número de teléfono"/>
                                  <field name="direccion" string="Dirección"/>
                                  <field name="objetivo" string="Objetivo"/>
                                </group>
                              </group>
                            </page3>
                            <page4 string="Forma de Pago y Tipo de Pase">
                              <group>
                                <field name="formas_de_pago" string="Formas de Pago"/>
                                <field name="birth_date" string="Fecha de Nacimiento"/>
                                <field name="tipo_pase_temporada" string="Tipo de Pase"/>
                              </group>
                            </page4>
                        </notebook>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Para el filtrado y group by con Search-->
  <record id="usuario_socia_view_search" model="ir.ui.view">
            <field name="name">usuario.socia.tree</field>
            <field name="model">usuario.socia</field>
            <field name="arch" type="xml">
                <search string="Socia buscador">
                    <field name="dada_alta" string="Dadas de Alta"/>
                    <separator/>
                    <filter string="Dadas de Alta" name="dada_alta" domain="[('dada_alta', '=', True)]"/>
                    <filter string="Dadas de Baja" name="dada_alta" domain="[('dada_alta', '=', False)]"/>
                    
                    <group expand="1" string="Group By">
                        <filter string="Tipo de Pase" name="tipo_pase_temporada" context="{'group_by':'tipo_pase_temporada'}"/>
                    </group>
                </search>
            </field>
  </record>


  <!-- Kanban -->
  <record id="usuario_socia_view_kanban" model="ir.ui.view">
  <field name="name">usuario.socia.kanban</field>
  <field name="model">usuario.socia</field>
  <field name="arch" type="xml">
    <kanban default_group_by="tipo_pase_temporada" records_draggable="0">
      <field name="dada_alta"/><!-- Es necesario para los t-if-->
      <templates>
          <t t-name="kanban-box">
              <div class="oe_kanban_global_click">
                <div>
                  <h3><field name="name"/> <field name="surnames"/></h3>
                </div>
                <div>
                  <strong class="o_kanban_record_title">
                  Nombre Usuario: <field name="user_id"/>
                  </strong>
                </div>
                <div>
                  Tipo Pase: <field name="tipo_pase_temporada"/>
                </div>
                <div t-if="record.dada_alta.raw_value">
                  Dada de alta en la fecha: <field name="fecha_de_alta"/>
                </div>
              </div>
          </t>
      </templates>
    </kanban>
    </field>
  </record>



  <!-- Para que aparezca el boton en el menu-->
    <record id="usuario_socia_action" model="ir.actions.act_window"><!-- el id que pongamos aqui servirá para llamarlo en el usuario_socia_menu-->
      <field name="name">Socias</field>
      <field name="res_model">usuario.socia</field>
      <field name="view_mode">kanban,tree,form</field>
      <field name="context">{'search_default_available': True}</field>
    </record>

  </odoo>
